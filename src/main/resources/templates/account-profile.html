<!DOCTYPE html>
<html lang="ko">
  <head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>Profile page</title>    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" 
    crossorigin="anonymous"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
     rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" 
     crossorigin="anonymous">
     <link rel="stylesheet" href="css/base.css">
     <link rel="stylesheet" href="css/style_profile.css">
  
  </head>
  <body>
<main>
    <div class="header-container">
        <div class="header-logo">
            <img src="images/log-170x50.svg" alt="" class="header-log-image">
        </div>
        <div class="nav-header">
            <ul class="nav-header-list">
                <li class="nav-header-item">Dashboard</li>
                <li class="nav-header-item">Search</li>
                <li class="nav-header-item">Group Info</li>
            </ul>
        </div>
        <img src="" alt="" class="profile-image">            
    </div>
  <div class="container py-4">
    <header class="pb-3 mb-4 border-bottom">
     
        <svg width="40" height="32" class="me-2" viewBox="0 0 118 94" role="img"></svg>
    </header>

    <div class="p-5 mb-4 bg-light rounded-3">
        <div class="profile-header">
            <h2 class="display-5 fw-bold">Profile</h2>
            <button id="EditBtn" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                edit
              </button>
            
        </div>
        
      <div id= "container"class="row align-items-md-stretch">
        <div class="col-md-4">
            <div>
                <img id="profile_img"src="https://cdnweb01.wikitree.co.kr/webdata/editor/202203/30/img_20220330160332_5b5ab5c0.webp" alt="">
            </div>
            
            <div id="EditPicture" ><button id="EditPictureBtn">+</button></div>
        </div>
        <div class="col-md-8">
            <ul id = "about-me">
                <li class ="profile_li"> <label for="">Name :</label>  <div id="profile_name"> Hyeon Bin </div></li>
                <li class ="profile_li"> <label for="">Major :</label> <div id="profile_major">software engineering</div> </li>
                <li class ="profile_li"> <label for="">Contact :</label> <div id="profile_contact">032 515 9258</div>  </li>
                <li class ="profile_li"> <label for="">Email :</label> <div id="profile_email">gjgusqls123@gmail.com</div> </li>
                <li class ="profile_li"> <label for="">Group :  </label> <a id="profile_group" href=""> group 5</a> </li>
                <li class ="profile_li"> <label for="">Company :</label> <a id="profile_company" href=""> samsum</a> </li>
                <li class ="profile_li">  <label for="">Capstone project :</label> <a id="profile_capstoneinfo" href="">samsung cloud service</a> </li>
            </ul>
        </div>
      </div>
    </div>
    

    <div class="row align-items-md-stretch">
      <div class="col-md-6">
        <div class="h-100 p-5 text-bg-dark rounded-3">
          <h2>Capabilities</h2>
          <ul id = "capability">
            <li class ="profile_li">AWS cloud service</li>
            <li class ="profile_li">Data structure algorithm</li>
            <li class ="profile_li">Java</li>
            <li class ="profile_li">Front end</li>
            <li class ="profile_li">Java script</li>
            <li class ="profile_li">C++</li>
            <li class ="profile_li">C</li>
            
        </ul>
        </div>
      </div>

      <div class="col-md-6">
        <div class="h-100 p-5 bg-light border rounded-3">
          <h2>Bib</h2>
        <div id ="Bib">
          Hello, I am hyeon bin
          <br>
          I am really good at C++ and algorithm
          <br>
          I am very activate person and also curiositarian.
        </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Edit Profile</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id ="editModal" class="row editModal">
                    <div id="Content" class="col-md-11">
                      <div style="width: 100%; text-align: center;" >
                        <h5>Profile</h5>
                      </div>
                        
                        <input id="NewName" class ="modal_profile" type="text" placeholder="Name : ">
                        <br>
                        <br>
                        
                        <input id="NewMajor" class ="modal_profile" type="text" placeholder="Major : ">
                        <br>
                        <br>
                       
                        <input id="NewContact" class ="modal_profile" type="text" placeholder="Contact : ">
                        <br>
                        <br>
                        
                        <input id="NewEmail" class ="modal_profile" type="text" placeholder="Email :">

                        <button id="SaveProfile" type="button" class="btn btn-primary" >Save</button>
                    </div>
                </div>
                <div id ="editModal" class="row editModal">
                  <div id="CapabilityHeader" class="col-md-11" >
                    <h5>Capability</h5>
                    <div id="CapabilitiesCreateContainer">
                      <input id="CapabilitiesCreateInput" type="text"><button id ="CapabilityCreateBtn" type="button" class="btn btn-success">Add</button>
                    </div>
                  </div>
                    <div id="CapabilitiesContainer" class="col-md-11">
                        <ul id ="ModalCapability" class="list-group">
                            
                        </ul>
                    </div>
                </div>
                <div id ="editModal" class="row editModal">
                    <div id="Content"  class="col-md-11">
                        <div style="width: 100%; text-align: center;" >
                          <h5>Bibliography</h5>
                        </div>
                        
                        <input id="Bibliography" type="text">
                        <button id="SaveBib" type="button" class="btn btn-primary" >Save</button>
                    </div>
                  </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
        </div>
      </main> 
    <footer class="pt-3 mt-4 text-muted border-top">
      
    </footer>
    
     
</body>
</html>
<script>
const SaveChangeBtn = document.getElementById('SaveProfile');
const EditBtn = document.getElementById('EditBtn');
const SaveBib = document.getElementById('SaveBib');
const CapabilityCreateBtn = document.getElementById('CapabilityCreateBtn');

CapabilityCreateBtn.addEventListener('click',() =>{
  const CapabilitiesCreateInput = document.getElementById('CapabilitiesCreateInput');

  if(CapabilitiesCreateInput.value != ""){
    const newSkill =CapabilitiesCreateInput.value;
    const ul = document.querySelector('#capability');
    const newli = document.createElement('li');
    newli.textContent = newSkill;
    newli.className = 'profile_li'
    ul.appendChild(newli);
    reloadSkills();
  }
})

SaveBib.addEventListener('click',() => {
  const newBib = document.getElementById('Bibliography').value;
  const Bib = document.getElementById('Bib');
  if(newBib != ""){
    Bib.innerHTML = newBib;
  }
})
EditBtn.addEventListener('click',() => {
  const ul = document.querySelector('#capability');
  const li = ul.querySelectorAll('li');
  const liCount = ul.querySelectorAll('li').length;

  const modalUl = document.querySelector('#ModalCapability');
  const ModalLi = modalUl.getElementsByTagName('li');

  for (let i = ModalLi.length - 1; i >= 0; i--) {
      modalUl.removeChild(ModalLi[i]);
  }

  for(let i = 0 ; i< liCount; i++){
    const skill = li[i].textContent;
    const modalLi = document.createElement('li');
    modalLi.textContent = skill;
    modalLi.className = 'list-group-item'
    const DelteBtn = document.createElement('Button');
    DelteBtn.id = 'deleteBtn'
    DelteBtn.classList.add("btn", "btn-danger");
    DelteBtn.innerHTML = "Delete";
    DelteBtn.addEventListener('click',DeleteSkill(skill));
    modalLi.appendChild(DelteBtn);
    modalUl.appendChild(modalLi);
  }
})

function DeleteSkill(skill){
  return function(){
    const ul = document.querySelector('#capability');
    const li = ul.querySelectorAll('li');
    const liCount = ul.querySelectorAll('li').length;
    for(let i = 0 ; i< liCount; i++){
      const oldSkill = li[i].textContent;
      if (oldSkill === skill) {
       ul.removeChild(li[i]);
      break;
      }
    }
    reloadSkills();

  }
}
function reloadSkills(){
  const ul = document.querySelector('#capability');
  const li = ul.querySelectorAll('li');
  const liCount = ul.querySelectorAll('li').length;
  const modalUl = document.querySelector('#ModalCapability');
  const ModalLi = modalUl.getElementsByTagName('li');
  for (let i = ModalLi.length - 1; i >= 0; i--) {
      modalUl.removeChild(ModalLi[i]);
  }

  for(let i = 0 ; i< liCount; i++){
    const skill = li[i].textContent;
    const modalLi = document.createElement('li');
    modalLi.textContent = skill;
    modalLi.className = 'list-group-item'
    const DelteBtn = document.createElement('Button');
    DelteBtn.id = 'deleteBtn'
    DelteBtn.classList.add("btn", "btn-danger");
    DelteBtn.innerHTML = "Delete";
    DelteBtn.addEventListener('click',DeleteSkill(skill));
    modalLi.appendChild(DelteBtn);
    modalUl.appendChild(modalLi);
  }

}
SaveChangeBtn.addEventListener('click', () => {
 
  const profile_name = document.getElementById('profile_name');
  const profile_major = document.getElementById('profile_major');
  const profile_contact = document.getElementById('profile_contact');
  const profile_email = document.getElementById('profile_email');

  let NewName = document.getElementById('NewName').value;
  let NewMajor = document.getElementById('NewMajor').value;
  let NewContact = document.getElementById('NewContact').value;
  let NewEmail= document.getElementById('NewEmail').value;

  if(NewName != ""){
    profile_name.innerHTML = NewName;
  }
  if(NewMajor != ""){
    profile_major.innerHTML = NewMajor;
  }
  if(NewContact != ""){
    profile_contact.innerHTML = NewContact;
  }
  if(NewEmail != ""){
    profile_email.innerHTML = NewEmail;
  }
});


</script>